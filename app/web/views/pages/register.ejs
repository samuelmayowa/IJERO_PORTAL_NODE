<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Register | EKITI STATE UNIVERSITY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="csrf-token" content="<%= csrfToken %>">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="shortcut icon" href="favicon.ico">

  <style>
    :root{ --green:#247D57; --maroon:#82103C; --ink:#222; }
    html,body{height:100%;}
    .page-container{position:relative; min-height:100vh; overflow:hidden;}
    .bg-cover{position:absolute; inset:0; background-size:cover; background-position:center; background-repeat:no-repeat;}
    .bg-frost{position:absolute; inset:0; background:#fff; opacity:.80;}
    .card-wrap{position:relative; z-index:2; max-width:560px; margin:7vh auto; border-radius:12px; box-shadow:0 12px 30px rgba(0,0,0,.12); overflow:hidden; background:#fff;}
    .brand{display:flex; align-items:center; justify-content:space-between; padding:.85rem 1rem; background:var(--green); color:#fff;}
    .brand img{height:36px;}
    .brand p{margin:0; font-weight:600; letter-spacing:.3px;}
    .content{ padding:1.1rem 1.25rem 1.5rem; }
    .input-group-addon{background:#f1f3f5; border:1px solid #ced4da; color:#222; padding:.55rem .75rem; font-weight:700; font-size:.85rem; white-space:nowrap; display:flex; align-items:center;}
    .input-group > .input-group-addon:first-child{ border-right:0; border-radius:.25rem 0 0 .25rem; }
    .input-group > .form-control{ border-left:0; border-right:0; padding:.65rem .75rem; color:#111; }
    .input-group > .input-group-addon:last-child{ border-left:0; cursor:pointer; border-radius:0 .25rem .25rem 0; }
    .btn-submit{ background:var(--maroon); color:#fff; font-weight:700; }
    .btn-submit:hover{ filter:brightness(.95); color:#fff; }
    .auth-links a{ text-decoration:none; color:var(--maroon); font-weight:700; }
  </style>
</head>

<body>
  <div class="page-container">
    <div class="bg-cover" style="background-image:url('/public/img/login-bg.jpg');"></div>
    <div class="bg-frost"></div>

    <div class="card-wrap">
      <div class="brand">
        <a href="/"><img src="/public/img/logo.png" alt=""></a>
        <p><i class="fa fa-user-plus"></i> SIGN-UP</p>
      </div>

      <div class="content">
        <form action="/register" method="POST" id="register_form" novalidate>
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">

          <div class="form-group">
            <label class="font-weight-bold">I am</label>
            <select name="role" class="form-control" required>
              <option value="applicant">Applicant</option>
              <option value="student">Student</option>
            </select>
          </div>

          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-id-card"></i>&nbsp; USERNAME</div>
              <input type="text" class="form-control" name="username" placeholder="Matric No / JAMB Reg / Email" required>
              <div class="input-group-addon d-none d-sm-flex"></div>
            </div>
          </div>

          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-key"></i>&nbsp; PASSWORD</div>
              <input type="password" class="form-control" id="password" name="password" placeholder="Choose a strong password" required>
              <div class="input-group-addon" id="togglePwd"><i class="fa fa-eye"></i></div>
            </div>
          </div>

          <div class="form-group">
            <div class="input-group">
              <div class="input-group-addon"><i class="fa fa-check-circle"></i>&nbsp; CONFIRM</div>
              <input type="password" class="form-control" id="confirm" name="confirm" placeholder="Re-enter password" required>
              <div class="input-group-addon d-none d-sm-flex"></div>
            </div>
            <small id="pm" class="text-danger" style="display:none;">Passwords do not match</small>
          </div>

          <button class="btn btn-submit btn-block">Create account</button>

          <div class="text-center auth-links mt-3">
            Already have an account? <a href="/login">Login</a>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // show/hide + simple confirm check
    (function(){
      var t = document.getElementById('togglePwd');
      var p = document.getElementById('password');
      var c = document.getElementById('confirm');
      var m = document.getElementById('pm');
      if(t && p){ t.addEventListener('click', function(){ p.type = p.type === 'password' ? 'text' : 'password'; this.firstElementChild.className = p.type==='password'?'fa fa-eye':'fa fa-eye-slash'; }) }
      if(p && c && m){
        function chk(){ m.style.display = (p.value && c.value && p.value !== c.value) ? 'block' : 'none'; }
        p.addEventListener('input', chk); c.addEventListener('input', chk);
      }
    })();
  </script>
</body>
</html>
