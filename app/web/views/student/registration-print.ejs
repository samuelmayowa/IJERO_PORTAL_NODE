<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title><%= title %></title>
    <link rel="stylesheet" href="/public/bootstrap/css/bootstrap.min.css">

    <style>
        body { font-size: 13px; }

        .header-logo img {
            width: 65px;
            height: 65px;
        }

        .student-photo {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
            border: 1px solid #ccc;
        }

        .biodata-box {
            border: 1px solid #999;
            padding: 10px;
            margin-top: 10px;
            background: #f9f9f9;
        }

        .title-head {
            text-align: center;
            margin-top: -60px;
        }

        .title-head h3 {
            margin: 0;
            font-weight: 700;
            text-transform: uppercase;
        }

        .qr-bottom {
            text-align: right;
            margin-top: 20px;
        }

        .signatures {
            margin-top: 35px;
        }
    </style>
</head>

<body>

<div class="container">

    <div class="row">

        <!-- LOGO -->
        <div class="col-xs-2 header-logo">
            <img src="/public/logo.png" alt="School Logo">
        </div>

        <!-- TITLE -->
        <div class="col-xs-8 title-head">
            <h3>EKITI STATE COLLEGE OF HEALTH SCIENCES & TECHNOLOGY</h3>
            <h4 style="margin-top:5px;">Course Registration Form</h4>
        </div>

        <!-- PHOTO -->
        <div class="col-xs-2 text-right">
            <% if (profile && profile.photo_path) { %>
                <img src="<%= profile.photo_path %>" class="student-photo"/>
            <% } else { %>
                <img src="/public/default-avatar.png" class="student-photo"/>
            <% } %>
        </div>
    </div>

    <!-- STUDENT BIO DATA -->
    <div class="biodata-box">
        <strong>Student Name:</strong> <%= student.first_name %> <%= student.last_name %><br>
        <strong>Matric Number:</strong> <%= student.matric_number %><br>
        <strong>Department:</strong> <%= profile.department_id %><br>
        <strong>Programme:</strong> <%= profile.programme_id %><br>
        <strong>Level:</strong> <%= profile.level %><br>
        <strong>Phone:</strong> <%= student.phone %><br>
        <strong>Email:</strong> <%= student.username %><br>
        <strong>Academic Session:</strong> <%= session.name %><br>
        <strong>Semester:</strong> <%= semester %>
    </div>

    <br>

    <!-- COURSE TABLE -->
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>#</th>
                <th>Code</th>
                <th>Title</th>
                <th>Unit</th>
                <th>Level</th>
                <th>Semester</th>
                <th>Type</th>
            </tr>
        </thead>
        <tbody>
            <% rows.forEach(function(row, idx) { %>
                <tr>
                    <td><%= idx + 1 %></td>
                    <td><%= row.code %></td>
                    <td><%= row.title %></td>
                    <td><%= row.unit %></td>
                    <td><%= row.level %></td>
                    <td><%= row.semester %></td>
                    <td><%= row.reg_type %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <strong>Total Courses:</strong> <%= totalCourses %><br>
    <strong>Total Units:</strong> <%= totalUnits %>

    <!-- QR CODE -->
    <div class="qr-bottom">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=<%= encodeURIComponent(qrTargetUrl) %>" />
        <div><small>Scan to verify</small></div>
    </div>

    <!-- SIGNATURES -->
    <div class="signatures row text-center">
        <div class="col-xs-4">
            _______________________________<br>
            Student's Signature / Date
        </div>

        <div class="col-xs-4">
            _______________________________<br>
            HOD / Date
        </div>

        <div class="col-xs-4">
            _______________________________<br>
            Registrar / Date
        </div>
    </div>

</div>

<script>
    window.print();
</script>

</body>
</html>
